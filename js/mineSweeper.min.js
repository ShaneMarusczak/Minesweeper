(function(){function A(){p++;60<=p&&(p=0,n++,60<=n&&(n=0,q++));m=p+60*n+3600*q;r.textContent=(q?9<q?q:"0"+q:"00")+":"+(n?9<n?n:"0"+n:"00")+":"+(9<p?p:"0"+p);u=setTimeout(A,1E3)}function v(){if(10===d)return t.u;if(15===d)return t.C;if(20===d)return t.B;if(30===d)return t.G}function w(a){x+=a;document.getElementById("bombsLeft").textContent=x}function B(a){for(let b=0;b<d;b++)for(let c=0;c<d;c++)g[b][c].h&&g[b][c].g?(h(b,c).classList.remove("flag"),h(b,c).classList.add("correct")):!g[b][c].h&&g[b][c].g&&
(h(b,c).classList.remove("flag"),h(b,c).classList.add("incorrect"));C=!0;clearTimeout(u);K(a,1200)}function D(a,b){const c=g[a][b];if(!(c.m||c.g||c.h||c.checked))if(0<c.j)c.s();else{c.l=!0;c.i=!1;h(a,b).classList.add("flipped");h(a,b).classList.add("empty");c.checked=!0;for(let e of g[a][b].o)D(e[0],e[1])}}function L(){return Number(Array.from(document.getElementById("difficulty").options).find(a=>a.selected).value)}function h(a,b){return document.getElementById("cell-"+a+"-"+b)}function M(a){y||
E||(document.getElementById("updateText").classList.add("hide"),document.getElementById("difForm").classList.add("hidden"),document.getElementById("highScores").classList.add("hide"),a.target.disabled=!0,a.target.classList.add("hidden"),N(),y=E=!0,r.classList.remove("hide"),document.getElementById("timerContainer").classList.remove("hide"),u=setTimeout(A,1E3),x=v(),w(0),document.getElementById("buildGrid").classList.add("hide"),document.getElementById("reload").classList.remove("hide"),document.getElementById("header-tag").classList.remove("header-before-start"),
10===d?document.getElementById("header-tag").classList.add("header-after-start-e"):15===d?document.getElementById("header-tag").classList.add("header-after-start-m"):20===d&&document.getElementById("header-tag").classList.add("header-after-start-h"),30===d&&document.getElementById("header-tag").classList.add("header-after-start-vh"),document.getElementById("gameBoard_UI").scrollIntoView(),document.getElementById("btns").classList.add("extraMargin"),k("mnswprprevdif",d,30))}function O(a){return new Promise(b=>
setTimeout(b,a))}function k(a,b,c){const e=new Date;e.setTime(e.getTime()+864E5*c);document.cookie=a+"="+b+";expires="+e.toUTCString()+";path=/;SameSite=Lax"}function l(a){a+="=";const b=decodeURIComponent(document.cookie).split(";");for(let c=0;c<b.length;c++){let e=b[c];for(;" "===e.charAt(0);)e=e.substring(1);if(0===e.indexOf(a))return e.substring(a.length,e.length)}return""}function N(){d=L();for(let a=0;a<d;a++){g.push([]);const b=document.createElement("div");b.id="col-"+a;b.classList.add("col");
document.getElementById("gameBoard_UI").appendChild(b);for(let c=0;c<d;c++){const e=new P(a,c);g[a].push(e);g[a][c].F();const f=document.createElement("div");f.id="cell-"+a+"-"+c;f.classList.add("cell");b.appendChild(f);f.addEventListener("mouseup",Q=>e.v(Q));10===d?f.classList.add("easyCell"):15===d?f.classList.add("medCell"):20===d?f.classList.add("hardCell"):30===d&&f.classList.add("vhardCell")}}R()}function K(a,b){const c=document.createElement("div");c.id="modal-box";const e=document.createElement("div");
e.id="inner-modal-box";const f=document.createElement("span");f.id="modal-message";e.appendChild(f);c.appendChild(e);f.innerText=a;document.getElementsByTagName("html")[0].appendChild(c);O(b).then(()=>c.remove())}function R(){let a=v();for(;0<a;){let b,c;do b=Math.floor(Math.random()*(d-0+1)),c=Math.floor(Math.random()*(d-0+1));while(!(0<=b&&b<d&&0<=c&&c<d)||g[b][c].h);g[b][c].D();a--}}function F(){z.checked?(r.classList.add("notShown"),k("hideSudokuTimer","Y",30)):(r.classList.remove("notShown"),
k("hideSudokuTimer","N",30))}function S(){const a=Number(l("mnswprprevdif"));10===a?document.getElementById("difEasy").setAttribute("selected","selected"):15===a?document.getElementById("difMed").setAttribute("selected","selected"):20===a?document.getElementById("difHard").setAttribute("selected","selected"):30===a&&document.getElementById("difvHard").setAttribute("selected","selected")}let y=!1,C=!1,E=!1,d=0,u,p=0,n=0,q=0,m=0,x;const T=l("mnswpreasy"),U=l("mnswprmed"),V=l("mnswprhard"),W=l("mnswprvhard"),
G=Number(l("mnswpreasysec")),H=Number(l("mnswprmedsec")),I=Number(l("mnswprhardsec")),J=Number(l("mnswprvhardsec")),g=[],t={u:12,C:35,B:62,G:107},z=document.getElementById("hideTimer"),r=document.getElementById("timer");class P{constructor(a,b){this.x=a;this.y=b;this.o=[];this.h=!1;this.j=0;this.checked=!1;this.i=!0;this.l=this.m=this.g=!1}F(){const a=[-1,0,1];for(let e of a)for(let f of a){var b=this.x+e,c=this.y+f;!(0<=b&&b<d&&0<=c&&c<d)||0===e&&0===f||this.o.push([this.x+e,this.y+f])}}D(){this.h=
!0;for(let a of this.o)g[a[0]][a[1]].j++}v(a){if(y&&!C&&!this.l){if(0===a.button&&this.i)if(this.h){this.l=!0;this.i=!1;h(this.x,this.y).classList.add("explosion");for(a=0;a<d;a++)for(var b=0;b<d;b++)this.x===a&&this.y===b||!g[a][b].h||g[a][b].g||h(a,b).classList.add("bomb");B("You Lose!")}else if(0<this.j)this.s();else{for(a=0;a<d;a++)for(b=0;b<d;b++)g[a][b].checked=!1;D(this.x,this.y)}else 2===a.button&&this.A();a=v();let c=b=0;for(let e=0;e<d;e++)for(let f=0;f<d;f++)g[e][f].g&&c++,g[e][f].h&&g[e][f].g&&
b++;if(b===a&&c===a){a=r.textContent;if(10===d){if(m<G||0===G)k("mnswpreasy",a,30),k("mnswpreasysec",m,30)}else if(15===d){if(m<H||0===H)k("mnswprmed",a,30),k("mnswprmedsec",m,30)}else if(20===d){if(m<I||0===I)k("mnswprhard",a,30),k("mnswprhardsec",m,30)}else 30===d&&(m<J||0===J)&&(k("mnswprvhard",a,30),k("mnswprvhardsec",m,30));B("You Win!")}}}A(){this.g?(h(this.x,this.y).textContent="?",h(this.x,this.y).classList.remove("flag"),h(this.x,this.y).classList.add("question-mark"),this.g=!1,this.m=!0,
w(1)):(this.m?(h(this.x,this.y).textContent="",this.m=this.g=!1,this.i=!0,h(this.x,this.y).classList.remove("flag")):(this.g=!0,this.i=!1,w(-1),h(this.x,this.y).classList.add("flag")),h(this.x,this.y).classList.remove("question-mark"))}s(){this.l=!0;this.i=!1;h(this.x,this.y).textContent=this.j;h(this.x,this.y).classList.add("flipped")}}(function(){document.getElementById("buildGrid").addEventListener("click",M);z.addEventListener("click",F);const a="Y"===l("hideSudokuTimer");(z.checked=a)||document.getElementById("highScores").classList.remove("hide");
F();document.oncontextmenu=()=>!1;document.getElementById("easyBestScore").textContent=T;document.getElementById("medBestScore").textContent=U;document.getElementById("hardBestScore").textContent=V;document.getElementById("vhardBestScore").textContent=W;S()})()})();
