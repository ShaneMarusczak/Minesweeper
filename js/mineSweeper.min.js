var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,e){if(e.get||e.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[d]=e.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var d=0;return $jscomp.iteratorPrototype(function(){return d<a.length?{done:!1,value:a[d++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var d=a[Symbol.iterator];return d?d.call(a):$jscomp.arrayIterator(a)};
$jscomp.polyfill=function(a,d,e,c){if(d){e=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var f=a[c];f in e||(e[f]={});e=e[f]}a=a[a.length-1];c=e[a];d=d(c);d!=c&&null!=d&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,e,c){$jscomp.initSymbolIterator();e=null!=e?e:function(b){return b};var d=[],b=a[Symbol.iterator];if("function"==typeof b)for(a=b.call(a);!(b=a.next()).done;)d.push(e.call(c,b.value));else for(var b=a.length,l=0;l<b;l++)d.push(e.call(c,a[l]));return d}},"es6-impl","es3");$jscomp.findInternal=function(a,d,e){a instanceof String&&(a=String(a));for(var c=a.length,f=0;f<c;f++){var b=a[f];if(d.call(e,b,f,a))return{i:f,v:b}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,e){return $jscomp.findInternal(this,a,e).v}},"es6-impl","es3");$jscomp.EXPOSE_ASYNC_EXECUTOR=!0;$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function d(){this.batch_=null}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;d.prototype.asyncExecute=function(b){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(b);return this};d.prototype.asyncExecuteBatch_=function(){var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})};var e=$jscomp.global.setTimeout;d.prototype.asyncExecuteFunction=function(b){e(b,0)};d.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var b=
this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var c=b[a];delete b[a];try{c()}catch(p){this.asyncThrow_(p)}}}this.batch_=null};d.prototype.asyncThrow_=function(b){this.asyncExecuteFunction(function(){throw b;})};var c=function(b){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{b(a.resolve,a.reject)}catch(n){a.reject(n)}};c.prototype.createResolveAndReject_=function(){function a(a){return function(b){d||(d=!0,a.call(c,b))}}var c=this,d=
!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};c.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof c)this.settleSameAsPromise_(a);else{var b;a:switch(typeof a){case "object":b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};c.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(n){this.reject_(n);return}"function"==
typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};c.prototype.reject_=function(a){this.settle_(2,a)};c.prototype.fulfill_=function(a){this.settle_(1,a)};c.prototype.settle_=function(a,c){if(0!=this.state_)throw Error("Cannot settle("+a+", "+c|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=c;this.executeOnSettledCallbacks_()};c.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=this.onSettledCallbacks_,c=0;c<a.length;++c)a[c].call(),
a[c]=null;this.onSettledCallbacks_=null}};var f=new d;c.prototype.settleSameAsPromise_=function(a){var c=this.createResolveAndReject_();a.callWhenSettled_(c.resolve,c.reject)};c.prototype.settleSameAsThenable_=function(a,c){var b=this.createResolveAndReject_();try{a.call(c,b.resolve,b.reject)}catch(p){b.reject(p)}};c.prototype.then=function(a,d){function b(a,c){return"function"==typeof a?function(c){try{e(a(c))}catch(k){l(k)}}:c}var e,l,h=new c(function(a,c){e=a;l=c});this.callWhenSettled_(b(a,e),
b(d,l));return h};c.prototype["catch"]=function(a){return this.then(void 0,a)};c.prototype.callWhenSettled_=function(a,c){function b(){switch(d.state_){case 1:a(d.result_);break;case 2:c(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?f.asyncExecute(b):this.onSettledCallbacks_.push(function(){f.asyncExecute(b)})};c.resolve=function(a){return a instanceof c?a:new c(function(c,b){c(a)})};c.reject=function(a){return new c(function(c,b){b(a)})};
c.race=function(a){return new c(function(b,d){for(var e=$jscomp.makeIterator(a),f=e.next();!f.done;f=e.next())c.resolve(f.value).callWhenSettled_(b,d)})};c.all=function(a){var b=$jscomp.makeIterator(a),d=b.next();return d.done?c.resolve([]):new c(function(a,e){function h(c){return function(b){g[c]=b;f--;0==f&&a(g)}}var g=[],f=0;do g.push(void 0),f++,c.resolve(d.value).callWhenSettled_(h(g.length-1),e),d=b.next();while(!d.done)})};$jscomp.EXPOSE_ASYNC_EXECUTOR&&(c.$jscomp$new$AsyncExecutor=function(){return new d});
return c},"es6-impl","es3");
(function(){function a(){if(10===h)return q.easy;if(15===h)return q.medium;if(20===h)return q.hard;if(30===h)return q.veryhard}function d(a,b){if(!(g[a][b].questionMark||g[a][b].flag||g[a][b].bomb||g[a][b].checked))if(g[a][b].hasBombNeighbor)g[a][b].showNumber();else{g[a][b].flipped=!0;g[a][b].clickable=!1;c(a,b).classList.add("flipped");g[a][b].checked=!0;for(var e=$jscomp.makeIterator(g[a][b].neighbors),m=e.next();!m.done;m=e.next())m=m.value,d(m[0],m[1])}}function e(){return Number(Array.from(document.getElementById("difficulty").options).find(function(a){return a.selected}).value)}function c(a,
c){return document.getElementById("cell-"+a+"-"+c)}function f(a){n||r||(a.target.disabled=!0,b(),n=r=!0)}function b(){h=e();for(var a=0;a<h;a++){g.push([]);var c=document.createElement("div");c.id="col-"+a;c.classList.add("col");t.appendChild(c);for(var b={},d=0;d<h;b={newCell:b.newCell},d++){b.newCell=new k(a,d);g[a].push(b.newCell);g[a][d].setNeighbors();var f=document.createElement("div");f.id="cell-"+a+"-"+d;f.classList.add("cell");c.appendChild(f);f.addEventListener("mouseup",function(a){return function(c){return a.newCell.handleClick(c)}}(b))}}l()}
function l(){for(var c=a(),b=h-1;0<c;){var d,e;do d=Math.floor(Math.random()*(b-0+1)+0),e=Math.floor(Math.random()*(b-0+1)+0);while(g[d][e].bomb);g[d][e].setBomb();c--}}var n=!1,p=!1,r=!1,h=0,g=[],q={easy:20,medium:45,hard:75,veryhard:125},t=document.getElementById("gameBoard_UI"),k=function(a,c){this.x=a;this.y=c;this.neighbors=[];this.hasBombNeighbor=this.bomb=!1;this.bombNeighborCount=0;this.checked=!1;this.clickable=!0;this.flipped=this.questionMark=this.flag=!1};k.prototype.setNeighbors=function(){for(var a=
[-1,0,1],c=$jscomp.makeIterator(a),b=c.next();!b.done;b=c.next())for(var b=b.value,d=$jscomp.makeIterator(a),e=d.next();!e.done;e=d.next()){var e=e.value,f=this.x+b,g=this.y+e;0<=f&&f<h&&0<=g&&g<h&&(0!==b||0!==e)&&this.neighbors.push([this.x+b,this.y+e])}};k.prototype.setBomb=function(){this.bomb=!0;c(this.x,this.y).classList.add("bomb");for(var a=$jscomp.makeIterator(this.neighbors),b=a.next();!b.done;b=a.next())b=b.value,g[b[0]][b[1]].hasBombNeighbor=!0,g[b[0]][b[1]].bombNeighborCount++};k.prototype.handleClick=
function(b){if(n&&!p&&!this.flipped){if(0===b.button&&this.clickable)if(this.bomb)p=this.flipped=!0,this.clickable=!1,c(this.x,this.y).classList.add("bomb"),alert("boom");else if(this.hasBombNeighbor)this.showNumber();else{for(b=0;b<h;b++)for(var e=0;e<h;e++)g[b][e].checked=!1;d(this.x,this.y)}else 2===b.button&&this.showFlagOrQuestionMark();b=a();for(var e=Math.pow(h,2),f=0,l=0,k=0;k<h;k++)for(var m=0;m<h;m++)g[k][m].flipped&&f++,g[k][m].bomb&&g[k][m].flag&&l++;if(l===b||e-f===b)p=!0,alert("you win")}};
k.prototype.showFlagOrQuestionMark=function(){this.flag?(c(this.x,this.y).textContent="?",c(this.x,this.y).classList.remove("flag"),c(this.x,this.y).classList.add("question-mark"),this.flag=!1,this.questionMark=!0):(this.questionMark?(c(this.x,this.y).textContent="",this.questionMark=this.flag=!1,this.clickable=!0,c(this.x,this.y).classList.remove("flag")):(this.flag=!0,this.clickable=!1,c(this.x,this.y).textContent="F",c(this.x,this.y).classList.add("flag")),c(this.x,this.y).classList.remove("question-mark"))};
k.prototype.showNumber=function(){this.flipped=!0;this.clickable=!1;c(this.x,this.y).textContent=this.bombNeighborCount};(function(){document.getElementById("buildGrid").addEventListener("click",f);document.oncontextmenu=function(){return!1}})()})();
