var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[e]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var e=0;return $jscomp.iteratorPrototype(function(){return e<a.length?{done:!1,value:a[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var e=a[Symbol.iterator];return e?e.call(a):$jscomp.arrayIterator(a)};
$jscomp.polyfill=function(a,e,d,b){if(e){d=$jscomp.global;a=a.split(".");for(b=0;b<a.length-1;b++){var f=a[b];f in d||(d[f]={});d=d[f]}a=a[a.length-1];b=d[a];e=e(b);e!=b&&null!=e&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,d,b){$jscomp.initSymbolIterator();d=null!=d?d:function(c){return c};var e=[],c=a[Symbol.iterator];if("function"==typeof c)for(a=c.call(a);!(c=a.next()).done;)e.push(d.call(b,c.value));else for(var c=a.length,l=0;l<c;l++)e.push(d.call(b,a[l]));return e}},"es6-impl","es3");$jscomp.findInternal=function(a,e,d){a instanceof String&&(a=String(a));for(var b=a.length,f=0;f<b;f++){var c=a[f];if(e.call(d,c,f,a))return{i:f,v:c}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6-impl","es3");$jscomp.EXPOSE_ASYNC_EXECUTOR=!0;$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function e(){this.batch_=null}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;e.prototype.asyncExecute=function(c){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(c);return this};e.prototype.asyncExecuteBatch_=function(){var c=this;this.asyncExecuteFunction(function(){c.executeBatch_()})};var d=$jscomp.global.setTimeout;e.prototype.asyncExecuteFunction=function(c){d(c,0)};e.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var c=
this.batch_;this.batch_=[];for(var a=0;a<c.length;++a){var b=c[a];delete c[a];try{b()}catch(n){this.asyncThrow_(n)}}}this.batch_=null};e.prototype.asyncThrow_=function(c){this.asyncExecuteFunction(function(){throw c;})};var b=function(c){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{c(a.resolve,a.reject)}catch(m){a.reject(m)}};b.prototype.createResolveAndReject_=function(){function a(a){return function(c){e||(e=!0,a.call(b,c))}}var b=this,e=
!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};b.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof b)this.settleSameAsPromise_(a);else{var c;a:switch(typeof a){case "object":c=null!=a;break a;case "function":c=!0;break a;default:c=!1}c?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};b.prototype.resolveToNonPromiseObj_=function(a){var c=void 0;try{c=a.then}catch(m){this.reject_(m);return}"function"==
typeof c?this.settleSameAsThenable_(c,a):this.fulfill_(a)};b.prototype.reject_=function(a){this.settle_(2,a)};b.prototype.fulfill_=function(a){this.settle_(1,a)};b.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};b.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=this.onSettledCallbacks_,b=0;b<a.length;++b)a[b].call(),
a[b]=null;this.onSettledCallbacks_=null}};var f=new e;b.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};b.prototype.settleSameAsThenable_=function(a,b){var c=this.createResolveAndReject_();try{a.call(b,c.resolve,c.reject)}catch(n){c.reject(n)}};b.prototype.then=function(a,e){function c(a,b){return"function"==typeof a?function(b){try{d(a(b))}catch(k){l(k)}}:b}var d,l,h=new b(function(a,b){d=a;l=b});this.callWhenSettled_(c(a,d),
c(e,l));return h};b.prototype["catch"]=function(a){return this.then(void 0,a)};b.prototype.callWhenSettled_=function(a,b){function c(){switch(e.state_){case 1:a(e.result_);break;case 2:b(e.result_);break;default:throw Error("Unexpected state: "+e.state_);}}var e=this;null==this.onSettledCallbacks_?f.asyncExecute(c):this.onSettledCallbacks_.push(function(){f.asyncExecute(c)})};b.resolve=function(a){return a instanceof b?a:new b(function(b,c){b(a)})};b.reject=function(a){return new b(function(b,c){c(a)})};
b.race=function(a){return new b(function(c,e){for(var d=$jscomp.makeIterator(a),f=d.next();!f.done;f=d.next())b.resolve(f.value).callWhenSettled_(c,e)})};b.all=function(a){var c=$jscomp.makeIterator(a),e=c.next();return e.done?b.resolve([]):new b(function(a,d){function h(b){return function(c){g[b]=c;f--;0==f&&a(g)}}var g=[],f=0;do g.push(void 0),f++,b.resolve(e.value).callWhenSettled_(h(g.length-1),d),e=c.next();while(!e.done)})};$jscomp.EXPOSE_ASYNC_EXECUTOR&&(b.$jscomp$new$AsyncExecutor=function(){return new e});
return b},"es6-impl","es3");
(function(){function a(){if(10===h)return q.easy;if(15===h)return q.medium;if(20===h)return q.hard;if(30===h)return q.veryhard}function e(a,c){if(!(g[a][c].questionMark||g[a][c].flag||g[a][c].bomb||g[a][c].checked))if(g[a][c].hasBombNeighbor)g[a][c].showNumber();else{g[a][c].flipped=!0;g[a][c].clickable=!1;b(a,c).classList.add("flipped");g[a][c].checked=!0;for(var t=$jscomp.makeIterator(g[a][c].neighbors),d=t.next();!d.done;d=t.next())d=d.value,e(d[0],d[1])}}function d(){return Number(Array.from(document.getElementById("difficulty").options).find(function(a){return a.selected}).value)}function b(a,
b){return document.getElementById("cell-"+a+"-"+b)}function f(a){m||r||(document.getElementById("difForm").classList.add("hidden"),a.target.disabled=!0,a.target.classList.add("hidden"),c(),m=r=!0)}function c(){h=d();for(var a=0;a<h;a++){g.push([]);var b=document.createElement("div");b.id="col-"+a;b.classList.add("col");u.appendChild(b);for(var c={},e=0;e<h;c={newCell:c.newCell},e++){c.newCell=new k(a,e);g[a].push(c.newCell);g[a][e].setNeighbors();var f=document.createElement("div");f.id="cell-"+a+
"-"+e;f.classList.add("cell");b.appendChild(f);f.addEventListener("mouseup",function(a){return function(b){return a.newCell.handleClick(b)}}(c))}}l()}function l(){for(var b=a(),c=h-1;0<b;){var e,d;do e=Math.floor(Math.random()*(c-0+1)+0),d=Math.floor(Math.random()*(c-0+1)+0);while(g[e][d].bomb);g[e][d].setBomb();b--}}var m=!1,n=!1,r=!1,h=0,g=[],q={easy:20,medium:45,hard:75,veryhard:125},u=document.getElementById("gameBoard_UI"),k=function(a,b){this.x=a;this.y=b;this.neighbors=[];this.hasBombNeighbor=
this.bomb=!1;this.bombNeighborCount=0;this.checked=!1;this.clickable=!0;this.flipped=this.questionMark=this.flag=!1};k.prototype.setNeighbors=function(){for(var a=[-1,0,1],b=$jscomp.makeIterator(a),c=b.next();!c.done;c=b.next())for(var c=c.value,e=$jscomp.makeIterator(a),d=e.next();!d.done;d=e.next()){var d=d.value,f=this.x+c,g=this.y+d;0<=f&&f<h&&0<=g&&g<h&&(0!==c||0!==d)&&this.neighbors.push([this.x+c,this.y+d])}};k.prototype.setBomb=function(){this.bomb=!0;for(var a=$jscomp.makeIterator(this.neighbors),
b=a.next();!b.done;b=a.next())b=b.value,g[b[0]][b[1]].hasBombNeighbor=!0,g[b[0]][b[1]].bombNeighborCount++};k.prototype.handleClick=function(c){if(m&&!n&&!this.flipped){if(0===c.button&&this.clickable)if(this.bomb){n=this.flipped=!0;this.clickable=!1;for(c=0;c<h;c++)for(var d=0;d<h;d++)g[c][d].bomb&&b(c,d).classList.add("bomb");alert("you lose")}else if(this.hasBombNeighbor)this.showNumber();else{for(c=0;c<h;c++)for(d=0;d<h;d++)g[c][d].checked=!1;e(this.x,this.y)}else 2===c.button&&this.showFlagOrQuestionMark();
c=a();for(var d=Math.pow(h,2),f=0,l=0,k=0;k<h;k++)for(var p=0;p<h;p++)g[k][p].flipped&&f++,g[k][p].bomb&&g[k][p].flag&&l++;if(l===c||d-f===c)n=!0,alert("you win")}};k.prototype.showFlagOrQuestionMark=function(){this.flag?(b(this.x,this.y).textContent="?",b(this.x,this.y).classList.remove("flag"),b(this.x,this.y).classList.add("question-mark"),this.flag=!1,this.questionMark=!0):(this.questionMark?(b(this.x,this.y).textContent="",this.questionMark=this.flag=!1,this.clickable=!0,b(this.x,this.y).classList.remove("flag")):
(this.flag=!0,this.clickable=!1,b(this.x,this.y).textContent="B",b(this.x,this.y).classList.add("flag")),b(this.x,this.y).classList.remove("question-mark"))};k.prototype.showNumber=function(){this.flipped=!0;this.clickable=!1;b(this.x,this.y).textContent=this.bombNeighborCount};(function(){document.getElementById("buildGrid").addEventListener("click",f);document.oncontextmenu=function(){return!1}})()})();
